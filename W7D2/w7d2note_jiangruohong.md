$AMAT_{cache}=T_{hit}+\text{MissRate}\times T_{penalty}$  
$AMAT_{memory}=T_{addressing}+T_{access}+T_{transfer}$

## Reducing Miss Penalty
### 1. Read Priority over Write on Miss
Add *Write Buffer* between cache and memory

Check write buffer contents before load. If no conflicts, continue memory access. Otherwise, get data from write buffer. 

Copy dirty blocks to write buffer, then do the load, and then store to memory.

### 2.Early Restart and Critical Word First

Donâ€™t wait for full block to be loaded before restarting CPU
- Early restart: As soon as the requested word of the block arrives, send it to the CPU and let the CPU continue execution
- Critical Word First: Request the missed word first from memory and send it to the CPU as soon as it arrives; let the CPU continue execution while filling the rest of the words in the block

### 3.Nonblocking Caches to reduce stalls on misses

allow data cache to continue to supply cache hits during a miss
- requires F/E bits on registers or out-of-order execution
- requires multi-bank memories (split memory into different banks, operation can be done on all banks simultaneously)

### 4.Add a second-level cache
$T_{penalty_{L1}}=T_{hit_{L2}}+ \text{MissRate}_{L2}\times T_{penalty_{L2}}$

Global miss rate (what matters): misses in this cache divided by the total number of memory accesses generated by the CPU

$\text{MissRate}_{Global}=\text{MissRate}_{L1}\times\text{MissRate}_{L2}$

Inclusive: $L1\subset L2\subset Memory$  
Exclusive: $\forall x\in L1,\ x\notin L2$